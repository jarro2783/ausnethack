rule linter
    command = python3 -m pylint site/$SOURCE

rule runtests
    command = python3 site/test.py

rule build_sass
    command = python3 src/compile_sass.py --srcdir $INPUT --dstdir $OUTPUT $
      --minify

build lint: phony lint-main lint-wwwnethack

build lint-main: linter
    SOURCE=main.py

build lint-wwwnethack: linter
    SOURCE=wwwnethack

build test: runtests

build sass: build_sass
    INPUT=css
    OUTPUT=static/css
